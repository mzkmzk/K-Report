{"version":3,"file":"index.bundle.js","sources":["webpack:///webpack/bootstrap 9e5ad929cc613b0bada4","webpack:///Src/Index.js","webpack:///","webpack:///Src/KReport.js","webpack:///Src/Options.js","webpack:///Src/Utils.js","webpack:///Src/LoadTime.js","webpack:///Src/Network.js","webpack:///Src/Error.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9e5ad929cc613b0bada4\n **/","import KReport from './KReport'\n\nif ( typeof module != 'undefined' && module.exports ) {\n    module.exports = KReport\n} else if ( typeof define == 'function' && define.amd ) {\n    define( function () { return KReport } )\n} else {\n    window.KReport = KReport\n}\nwindow.KReport = KReport\n\n\n\n/** WEBPACK FOOTER **\n ** Src/Index.js\n **/","undefined\n\n\n/** WEBPACK FOOTER **\n ** \n **/","import Options from './Options'\nimport Utils from './Utils'\nimport LoadTime from './LoadTime'\nimport Network from './Network'\nimport Error from './Error'\n\n class KReport {\n\n    setOptions(options) {\n        Options.setOptions(options)\n\n        window.addEventListener('beforeunload',function(e) {\n            KReport.sendMessage()\n        })\n    }\n\n    sendMessage() {\n        let options =  Options.getOptions()\n        if (options.loadtime !== undefined && options.loadtime.url !== undefined) {\n            let img = new Image()\n            img.src = Utils.urlAppendData(options.loadtime.url,LoadTime.getTime())\n        }\n\n        if (options.network !== undefined) {\n            let img = new Image()\n            img.src = Utils.urlAppendData(options.network.url,Network.resourceTimeOut)\n        }\n\n        if (options.error !== undefined) {\n            let img = new Image()\n            img.src = Utils.urlAppendData(options.error.url,Error.message())\n        }\n    }\n    \n    \n}\n\nexport default new KReport()\n\n\n\n\n/** WEBPACK FOOTER **\n ** Src/KReport.js\n **/","export default class Options {\n    static defaultOptions() {\n       return {\n            'loadtime': {\n                'url': 'http://k-report.404mzk.com/loadtime',\n            },\n            'network': {\n                'url': 'http://k-report.404mzk.com/network',\n                'timer': 5000,\n                'timeout': 500,\n            },\n            'error': {\n                'url': 'http://k-report.404mzk.com/error',\n            }\n       }\n    }\n\n    static setOptions(options) {\n         if (options == undefined ) return Options.defaultOptions()\n\n        let defaultOptions = Options.defaultOptions(), //前者为layer时只替换部分属性\n            keys = Object.keys(defaultOptions)\n        \n        for (var i = keys.length - 1; i >= 0; i--) {\n            if (options[keys[i]] === undefined) {\n                options[keys[i]] = defaultOptions[keys[i]]\n            }\n        }\n        \n        Options.Options = options\n        return options\n    }\n\n    static getOptions(key) {\n        let options = Options.options || Options.defaultOptions()\n        \n        if (key == undefined) return options\n        \n        if (options[key] == undefined) return \n\n        return options[key]\n    }\n\n\n}\n\n \n\n\n/** WEBPACK FOOTER **\n ** Src/Options.js\n **/","export default class Utils {\n    static supportPerformance() {\n        if (\n                'performance' in window && \n                'getEnteriesByType' in window.performance &&\n                window.performance.getEnteriesByType('resource') instanceof Array\n            ) {\n            return true\n        }else {\n            return false\n        }\n    }\n\n    static now() {\n        if(Utils.supportPerformance()) {\n            return window.performance.now()\n        }else {\n            return Date.now()\n        }\n    }\n\n    static urlAppendData(url, data) {\n        if (url.indexOf('?') === -1) {\n            url += '?'\n        }else {\n            url += '&'\n        }\n        return url + Utils.encodeFormData(data)\n    }\n\n    static encodeFormData(data) {\n        if (!data) return ''\n        var pairs = []\n        for(var name in data) {\n            if(!data.hasOwnProperty(name)) continue\n            if(typeof data[name] === 'function') continue\n            var value =data[name].toString()\n            name = encodeURIComponent(name.replace('%20','+'))\n            value = encodeURIComponent(value.replace('%20','+'))\n            pairs.push(name + '=' + value)\n        }\n        return pairs.join('&')\n    }\n}\n\n\n/** WEBPACK FOOTER **\n ** Src/Utils.js\n **/","import Utils from './Utils'\n\nexport default class LoadTime {\n    constructor() {\n        LoadTime.domContentLoadedTime = -1\n        LoadTime.windowLoaded = -1\n\n        //init\n        LoadTime.setDOMContentLoaded()\n        LoadTime.setWindowLoeded()\n    }\n\n    static getTime() {\n        return {\n            unloadEventStart: LoadTime.unloadEventStart(),\n            domContentLoaded: LoadTime.domContentLoadedTime,\n            firstScreen: LoadTime.firstScreen(),\n            windowLoaded: LoadTime.windowLoaded\n        }\n    }\n\n    static unloadEventStart() {\n        if (Utils.supportPerformance()) {\n            return performance.timing.unloadEventStart\n        }else {\n            return -1\n        }\n    }\n\n    static setDOMContentLoaded() {\n        if (Utils.supportPerformance()) {\n            return performance.timing.domContentLoadedEventStart\n        }else {\n            function completed() {\n                document.removeEventListener( 'DOMContentLoaded', completed )\n                window.removeEventListener( 'load', completed )\n                LoadTime.domContentLoadedTime = Utils.now()\n            }\n\n            // Catch cases where $(document).ready() is called\n            // after the browser event has already occurred.\n            // Support: IE <=9 - 10 only\n            // Older IE sometimes signals 'interactive' too soon\n            if ( document.readyState === 'complete' ||\n                ( document.readyState !== 'loading' && !document.documentElement.doScroll ) ) {\n\n                // Handle it asynchronously to allow scripts the opportunity to delay ready\n                LoadTime.domContentLoadedTime = Date.now()\n\n            } else {\n\n                // Use the handy event callback\n                document.addEventListener( 'DOMContentLoaded', completed )\n\n                // A fallback to window.onload, that will always work\n                window.addEventListener( 'load', completed )\n            }\n        }\n        \n        \n    }\n\n    static firstScreen() {\n        \n    }\n\n    static setWindowLoeded() {\n        window.addEventListener('load',function(){\n            LoadTime.windowLoaded = Utils.now()\n        })\n    }\n\n    \n}\n\n\n\n/** WEBPACK FOOTER **\n ** Src/LoadTime.js\n **/","import Utils from './Utils'\nimport Options from './Options'\n\nexport default class Network {\n    constructor() {\n        Network.resourceTimeOut = []\n    }\n\n    static setTimer() {\n        let time = Options.getOptions('time')\n        time = time < 5000 ? 5000 : time\n        let timer = setInterval(function(){\n            if( Utils.supportPerformance() ) {\n                Network.performanceTimer()\n            }else {\n\n            }\n        },time)\n        return timer\n    }\n\n    static performanceTimer() {\n        let timeout = parseInt(Options.getOptions('timeout'))\n            enties = performance.getEntries(),\n            entriesLength = enties.length ,\n            resourceStart = Network.resourceStart || 0\n\n        for (var i = resourceStart; i < entriesLength; i++) {\n            if (enties[i].duration > timeout) {\n                let timeoutObj = {\n                    'duration': enties[i].duration,\n                    'url': enties[i].name\n                }\n                Network.resourceTimeOut.push(timeoutObj)\n            }\n        }\n\n        Network.resourceStart = performance.getEntries().length \n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** Src/Network.js\n **/","export default class Error {\n    \n    constructor() {\n        Error.message = []\n    }\n\n    static setOnError() {\n        window.addEventListener('error', function(e) {\n            Error.message.push(JSON.stringify(e))\n        }, true)\n\n        window.onerror = function (msg, url, lineNo, columnNo, error) {\n            let string = msg.toLowerCase(),\n               substring = 'script error'\n            if (string.indexOf(substring) > -1){\n                console.log('Script Error: See Browser Console for Detail')\n            } else {\n                let message = [\n                    'Message: ' + msg,\n                    'URL: ' + url,\n                    'Line: ' + lineNo,\n                    'Column: ' + columnNo,\n                    'Error object: ' + JSON.stringify(error)\n                ].join(' - ')\n                \n\n                Error.message.push(JSON.stringify(e))\n            }\n\n            return false\n        }\n    }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** Src/Error.js\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtCA;AACA;;;;;AACA;ACCA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACRA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;AACA;;;;;;;AAEA;ADCA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAKA;;;;;;;;;;;;;;;;AErCA;;;;;;;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AATA;AAaA;;;AAEA;AFCA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAzCA;;;;;;;;;;;;;;;;AGAA;;;;;;;AACA;AACA;AHKA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AA1CA;;;;;;;;;;;;;;AIAA;AACA;;;;;;;AACA;AACA;AAAA;AACA;AAAA;AJCA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;AAyBA;AAGA;;;AAEA;;;AAIA;AACA;AACA;AACA;AACA;;;;;;AApEA;;;;;;;;;;;;;;AKFA;AACA;;;AAAA;AACA;;;;;;;AACA;AACA;AAAA;AACA;AAAA;ALCA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;;AAnCA;;;;;;;;;;;;;;;;AMHA;AAEA;AAAA;AACA;AAAA;ANCA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;;;;;;AA/BA;;;","sourceRoot":""}