!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){return e&&e.__esModule?e:{"default":e}}var o,a=n(4),i=r(a);"undefined"!=typeof e&&e.exports?e.exports=i["default"]:(o=function(){return i["default"]}.call(t,n,t,e),!(void 0!==o&&(e.exports=o))),window.KReport=i["default"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"supportPerformance",value:function(){return"performance"in window&&"getEntriesByType"in window.performance&&window.performance.getEntriesByType("resource")instanceof Array}},{key:"now",value:function(){return e.supportPerformance()?window.performance.now():Date.now()}},{key:"urlAppendData",value:function(t,n){return t+=t.indexOf("?")===-1?"?":"&",t+e.encodeFormData(n)}},{key:"encodeFormData",value:function(e){if(!e)return"";var t=[];for(var n in e)if(e.hasOwnProperty(n)&&"function"!=typeof e[n]){var r=JSON.stringify(e[n]);n=encodeURIComponent(n.replace("%20","+")),r=encodeURIComponent(r.replace("%20","+")),t.push(n+"="+r)}return t.join("&")}}]),e}();t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"defaultOptions",value:function(){return{loadtime:{url:"http://k-report.404mzk.com/loadtime"},network:{url:"http://k-report.404mzk.com/network",timer:5e3,timeout:2},error:{url:"http://k-report.404mzk.com/error"}}}},{key:"setOptions",value:function(t){if(void 0==t)return e.defaultOptions();for(var n=e.defaultOptions(),r=Object.keys(n),o=r.length-1;o>=0;o--)void 0===t[r[o]]&&(t[r[o]]=n[r[o]]);return e.Options=t,t}},{key:"getOptions",value:function(t){var n=e.options||e.defaultOptions();if(void 0==t)return n;if(void 0!=n[t])return n[t]}}]),e}();t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.message=[],this.setOnError()}return r(e,[{key:"setOnError",value:function(){var e=window.onerror,t=this;window.addEventListener("error",function(e){return void 0!==e.message||(t.message.push({id:e.target.id,className:e.target.className,url:e.target.currentSrc||e.target.href}),!0)},!0),window.onerror=function(n,r,o,a,i){var u=n.toLowerCase(),f="script error",d="";return null!==e&&e(n,r,o,a,i),u.indexOf(f)>-1?d={message:"Script Error: See Browser Console for Detail"}:(d={message:n,url:r,line:o,column:a,object:JSON.stringify(i)},t.message.push(d)),!1}}}]),e}();t["default"]=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=r(i),f=n(6),d=r(f),c=n(3),s=r(c),l=n(2),p=r(l),m=n(1),v=r(m),w=function(){function e(){o(this,e)}return a(e,[{key:"setOptions",value:function(e){var t=p["default"].setOptions(e),n=this;void 0!==t.loadtime&&(this.loadtime=new u["default"]),void 0!==t.network&&(this.network=new d["default"]),void 0!==t.error&&(this.error=new s["default"]),window.addEventListener("beforeunload",function(e){n.sendMessage()})}},{key:"sendMessage",value:function(){var e=p["default"].getOptions();if(void 0!==this.loadtime){var t=new Image;t.src=v["default"].urlAppendData(e.loadtime.url,this.loadtime.getTime())}if(void 0!==this.network){var n=new Image;n.src=v["default"].urlAppendData(e.network.url,this.network.resourceTimeOut)}if(void 0!==this.error){var r=new Image;r.src=v["default"].urlAppendData(e.error.url,this.error.message)}}}]),e}();t["default"]=new w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),u=r(i),f=function(){function e(){o(this,e),this.domContentLoadedTime=-1,this.windowLoaded=-1,this.setDOMContentLoaded(),this.setWindowLoeded()}return a(e,[{key:"getTime",value:function(){return{unloadEventStart:this.unloadEventStart(),domContentLoaded:this.domContentLoadedTime,firstScreen:this.firstScreen(),windowLoaded:this.windowLoaded}}},{key:"unloadEventStart",value:function(){return u["default"].supportPerformance()?performance.timing.unloadEventStart:-1}},{key:"setDOMContentLoaded",value:function(){function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),u["default"].supportPerformance()?t.domContentLoadedTime=performance.timing.domContentLoadedEventStart:t.domContentLoadedTime=u["default"].now()}var t=this;"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?u["default"].supportPerformance()?t.domContentLoadedTime=performance.timing.domContentLoadedEventStart:t.domContentLoadedTime=u["default"].now():(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e))}},{key:"firstScreen",value:function(){return-1}},{key:"setWindowLoeded",value:function(){var e=this;window.addEventListener("load",function(){e.windowLoaded=Date.now()})}}]),e}();t["default"]=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),u=r(i),f=n(2),d=r(f),c=function(){function e(){o(this,e),this.resourceTimeOut=[],this.setTimer()}return a(e,[{key:"setTimer",value:function(){var e=d["default"].getOptions("network").timer,t=this;e=e<5e3?5e3:e;var n=setInterval(function(){u["default"].supportPerformance()&&t.performanceTimer()},e);return n}},{key:"performanceTimer",value:function(){for(var e=parseInt(d["default"].getOptions("network").timeout),t=performance.getEntries(),n=t.length,r=this.resourceStart||0,o=r;o<n;o++)if(t[o].duration>e){var a={duration:t[o].duration,url:t[o].name};this.resourceTimeOut.push(a)}this.resourceStart=n}}]),e}();t["default"]=c}]);